{
    "version": "https://jsonfeed.org/version/1",
    "title": "Or0kit • All posts by \"apeache\" tag",
    "description": "临渊羡鱼，不如退而结网",
    "home_page_url": "https://Or0kit.github.io",
    "items": [
        {
            "id": "https://or0kit.github.io/PenetrationTest/Web-Security/Apache-Config/",
            "url": "https://or0kit.github.io/PenetrationTest/Web-Security/Apache-Config/",
            "title": "Apache_Config",
            "date_published": "2020-11-30T00:42:31.000Z",
            "content_html": "<h1 id=\"一-apache主要配置文件注释\"><a class=\"anchor\" href=\"#一-apache主要配置文件注释\">#</a> 一、Apache 主要配置文件注释</h1>\n<p>Apache 的主配置文件：httpd.conf</p>\n<hr />\n<p>Apache 服务器的配置信息全部存储在主配置文件 httpd.conf 中，这个文件中的内容非常多，其中大部分是以 #开头的注释行。</p>\n<hr />\n<p>ServerTokens OS<br />\n 在出现错误页的时候是否显示服务器操作系统的名称，ServerTokens Prod 为不显示</p>\n<hr />\n<p>ServerRoot &quot;/etc/httpd&quot;<br />\n 用于指定 Apache 的运行目录，服务启动之后自动将目录改变为当前目录，在后面使用到的所有相对路径都是相对这个目录</p>\n<hr />\n<p>User daemon                          # apache 的用户，默认为 daemon<br />\nGroup daemon                         # apache 的用户，默认为 daemon</p>\n<hr />\n<p>PidFile run/httpd.pid<br />\n 记录 httpd 守护进程的 pid 号码，这是系统识别一个进程的方法，系统中 httpd 进程可以有多个，但这个 PID 对应的进程是其他的父进程</p>\n<hr />\n<p>Listen 80<br />\n 监听的端口</p>\n<hr />\n<p>Include conf.modules.d/<em>.conf<br />\n 包含辅助配置文件目录下的所有以.conf 结尾的；；；文件 (/etc/httpd/conf.modules.d/</em>.conf)</p>\n<hr />\n<p>User apache       // 运行 web 服务的用户<br />\n Group apache</p>\n<p>ServerAdmin root@localhost<br />\n 管理员邮件地址</p>\n<hr />\n<p>#ServerName <span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5leGFtcGxlLmNvbTo4MA==\">www.example.com:80</span></p>\n<p>ServerName <span class=\"exturl\" data-url=\"aHR0cDovL3d3dy51cGxvb2tpbmcuY29tOjgw\">www.uplooking.com:80</span></p>\n<p>服务器的名字</p>\n<hr />\n<p>&lt;Directory /&gt;   --- 容器，对整个目录中的东西进行设置，权限等等<br />\n AllowOverride none<br />\nRequire all denied<br />\n&lt;/Directory&gt;</p>\n<hr />\n<p>DocumentRoot &quot;/var/www/html&quot;    //web 服务文档根路径</p>\n<p>&lt;Directory &quot;/var/www&quot;&gt;<br />\nAllowOverride None<br />\n# Allow open access:<br />\nRequire all granted<br />\n&lt;/Directory&gt;</p>\n<hr />\n<p>&lt;Directory &quot;/var/www/html&quot;&gt;<br />\nOptions Indexes FollowSymLinks     //Indexes：索引目录，（默认没有主页时），允许索引目录   FollowSymLinks：支持符号链接  软连接<br />\n AllowOverride None     // 和访问权限有关  可以进行认证        None -- 不使用认证  all-- 应用所有的认证指令  AuthConfig  -- 允许使用与认证授权相关的指令<br />\n Require all granted    // 访问控制  所有人放行<br />\n &lt;/Directory&gt;</p>\n<hr />\n<p>&lt;IfModule dir_module&gt;<br />\nDirectoryIndex index.html    // 网站索引页的名称<br />\n &lt;/IfModule&gt;</p>\n<hr />\n<p>&lt;Files &quot;.ht*&quot;&gt;   <a href=\"//xn--onqt58b9od.xn--ht-0v2cr7rysinljbd734h560cpjpfa017hsnnga166c4nw\">// 以所有.ht 开头进行模式匹配不能进行访问</a><br />\n Require all denied<br />\n&lt;/Files&gt;</p>\n<hr />\n<p>ErrorLog &quot;logs/error_log&quot;    // 错误日志的设定</p>\n<hr />\n<p>LogLevel warn  // 日志级别</p>\n<hr />\n<p>&lt;IfModule log_config_module&gt;<br />\nLogFormat &quot;% h % l % u % t&quot;% r&quot;%&gt;s % b&quot;%{Referer} i&quot;&quot;%{User-Agent} i&quot;&quot; combined   // 日志格式规定<br />\n LogFormat &quot;% h % l % u % t&quot;% r&quot;%&gt;s % b&quot; common     // 日志格式规定<br />\n &lt;IfModule logio_module&gt;<br />\nLogFormat &quot;% h % l % u % t&quot;% r&quot;%&gt;s % b&quot;%{Referer} i&quot;&quot;%{User-Agent} i&quot; % I % O&quot; combinedio   // 日志格式规定<br />\n &lt;/IfModule&gt;<br />\nCustomLog &quot;logs/access_log&quot; combined  // 访问日志<br />\n &lt;/IfModule&gt;</p>\n<hr />\n<p>&lt;IfModule alias_module&gt;<br />\n# Alias /webpath /full/filesystem/path<br />\n 给路径设置别名<br />\n意味着访问 <code>http://Server_ip/webpath</code>  时，其页面文件来自于 /full/filesystem/path 中<br />\n ScriptAlias /cgi-bin/ &quot;/var/www/cgi-bin/&quot;<br />\n 脚本路径的别名</p>\n<p>&lt;/IfModule&gt;</p>\n<hr />\n<p>&lt;Directory &quot;/var/www/cgi-bin&quot;&gt;<br />\nAllowOverride None<br />\nOptions None<br />\nRequire all granted<br />\n&lt;/Directory&gt;</p>\n<hr />\n<p>&lt;IfModule mime_module&gt;<br />\nTypesConfig /etc/mime.types    // 支持哪些非二进制文件<br />\n AddType application/x-compress .Z<br />\nAddType application/x-gzip .gz .tgz<br />\nAddType text/html .shtml<br />\nAddOutputFilter INCLUDES .shtml<br />\n&lt;/IfModule&gt;</p>\n<hr />\n<p>AddDefaultCharset UTF-8   // 默认字符集</p>\n<hr />\n<p>#EnableMMAP off    // 线程模式<br />\n EnableSendfile on   // 开启进程模式 (默认)</p>\n<hr />\n<p>IncludeOptional conf.d/<em>.conf    <a href=\"//xn--ghqqurb19uen20dx50b1kfwpio3dq99cjbbf29dt43cquf.xn--conf-t85fm71eo1ob75a5vp\">// 包含辅助配置文件目录下的所有以.conf 结尾的文件</a> (/etc/httpd/conf.d/</em>.conf)</p>\n<hr />\n<h1 id=\"二-apache扩展的配置文件\"><a class=\"anchor\" href=\"#二-apache扩展的配置文件\">#</a> 二、Apache 扩展的配置文件</h1>\n<p>$APACHE_HOME/conf/extra          # apache 扩展的配置文件<br />\n [root@extra]# ll<br />\ntotal 56<br />\n-rw-r--r-- 1 root root  2859 Jan 10 01:49 httpd-autoindex.conf<br />\n-rw-r--r-- 1 root root  1753 Jan 10 01:49 httpd-dav.conf<br />\n-rw-r--r-- 1 root root  2344 Jan 10 01:49 httpd-default.conf<br />\n-rw-r--r-- 1 root root  1103 Jan 10 01:49 httpd-info.conf<br />\n-rw-r--r-- 1 root root  5078 Jan 10 01:49 httpd-languages.conf<br />\n-rw-r--r-- 1 root root   932 Jan 10 01:49 httpd-manual.conf<br />\n-rw-r--r-- 1 root root  3789 Jan 10 01:49 httpd-mpm.conf<br />\n-rw-r--r-- 1 root root  2207 Jan 10 01:49 httpd-multilang-errordoc.conf<br />\n-rw-r--r-- 1 root root 11185 Jan 10 01:49 httpd-ssl.conf<br />\n-rw-r--r-- 1 root root   817 Jan 10 01:49 httpd-userdir.conf<br />\n-rw-r--r-- 1 root root  1507 Jan 10 01:49 httpd-vhosts.conf # 虚拟主机配置文件</p>\n<hr />\n<h1 id=\"三-httpd-vhostsconf虚拟主机配置文件注释\"><a class=\"anchor\" href=\"#三-httpd-vhostsconf虚拟主机配置文件注释\">#</a> 三、httpd-vhosts.conf 虚拟主机配置文件注释</h1>\n<p>[root@extra]# egrep -v &quot;<sup>.*#|</sup>$&quot; httpd-vhosts.conf |nl<br />\n1  NameVirtualHost *:80                                # 基于名称的虚拟主机配置（ *:80 表示监听本机所有 ip）<br />\n2  &lt;VirtualHost *:80&gt;                                  # 定义一个虚拟主机<br />\n 3      ServerAdmin <span class=\"exturl\" data-url=\"bWFpbHRvOndlYm1hc3RlckBkdW1teS1ob3N0LmV4YW1wbGUuY29t\">webmaster@dummy-host.example.com</span>    # 配置管理员邮箱<br />\n 4      DocumentRoot &quot;/application/apache2.2.22/docs/dummy-host.example.com&quot;  # 程序的站点目录<br />\n 5      ServerName <span class=\"exturl\" data-url=\"aHR0cDovL2R1bW15LWhvc3QuZXhhbXBsZS5jb20=\">dummy-host.example.com</span>               # 域名服务，需要 apache mode_alias 模块支持<br />\n 6      ServerAlias <span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5kdW1teS1ob3N0LmV4YW1wbGUuY29t\">www.dummy-host.example.com</span>          # 虚拟主机别名<br />\n 7      ErrorLog &quot;logs/dummy-host.example.com-error_log&quot;# 错误的日志路径<br />\n 8      CustomLog &quot;logs/dummy-host.example.com-access_log&quot; common  #访问日志配置（生产环境我们用 combined 格式代替 common 格式）<br />\n9  &lt;/VirtualHost&gt;<br />\n10  &lt;VirtualHost *:80&gt;<br />\n11      ServerAdmin <span class=\"exturl\" data-url=\"bWFpbHRvOndlYm1hc3RlckBkdW1teS1ob3N0Mi5leGFtcGxlLmNvbQ==\">webmaster@dummy-host2.example.com</span><br />\n12      DocumentRoot &quot;/application/apache2.2.22/docs/dummy-host2.example.com&quot;<br />\n13      ServerName <span class=\"exturl\" data-url=\"aHR0cDovL2R1bW15LWhvc3QyLmV4YW1wbGUuY29t\">dummy-host2.example.com</span><br />\n14      ErrorLog &quot;logs/dummy-host2.example.com-error_log&quot;<br />\n15      CustomLog &quot;logs/dummy-host2.example.com-access_log&quot; common<br />\n16  &lt;/VirtualHost&gt;</p>\n",
            "tags": [
                "Apeache"
            ]
        }
    ]
}